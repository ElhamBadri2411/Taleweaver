<div class="content">
  <div class="functions flex justify-between px-10 py-5 shadow-xl">
    <div class="card card-side bg-secondary shadow-xl mx-5">
      <div class="card-body">
        <h2 class="card-title text-accent-content">Create a new Tale ...</h2>
        <p class="text-accent-content text-sm">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Massa elit
          lectus enim id euismod. Gravida at praesent aliquam, at natoque at
          leo. Faucibus quam ipsum mi eget consectetur posuere dui vulputate
          magna.
        </p>
        <div class="card-actions justify-end">
          <button (click)="navigateToCreateNewStory()" class="btn btn-outline">
            Create a Tale
          </button>
        </div>
      </div>
    </div>
    <div class="card card-side bg-purple-900 shadow-xl mx-5">
      <div class="card-body">
        <h2 class="card-title text-accent-content">Generate a new Tale...</h2>
        <p class="text-accent-content text-sm">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Massa elit
          lectus enim id euismod. Gravida at praesent aliquam, at natoque at
          leo. Faucibus quam ipsum mi eget consectetur posuere dui vulputate
          magna.
        </p>
        <div class="card-actions justify-end">
          <button (click)="navigateToGenerateStory()" class="btn btn-outline">
            Generate a Tale
          </button>
        </div>
      </div>
    </div>
    <div class="card card-side bg-pink-900 shadow-xl mx-5">
      <div class="card-body">
        <h2 class="card-title text-accent-content">FEATURE 3</h2>
        <p class="text-accent-content text-sm">
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Massa elit
          lectus enim id euismod. Gravida at praesent aliquam, at natoque at
          leo. Faucibus quam ipsum mi eget consectetur posuere dui vulputate
          magna.
        </p>
        <div class="card-actions justify-end">
          <button class="btn btn-outline">START NOW!</button>
        </div>
      </div>
    </div>
  </div>

  <div class="books-wrapper mx-5 my-10 flex flex-wrap">
    @for( storyBook of storyBooks; track storyBook.id; let i = $index){ @if
    (storyBook.isGenerating){
    <div
      class="flex flex-col items-center justify-center border-primary border rounded-tl-md rounded-bl-md mt-6 rounded-tr-xl rounded-br-xl h-[300px] w-[200px]"
    >
      <div>
        <span class="loading loading-ring loading-lg"></span>
      </div>
      <div>GENERATING THIS BOOK</div>
    </div>
    } @else {
    <div class="flex flex-col">
      <div
        class="storybook"
        [@zoomToLeft]="isClicked[i] ? 'zoom' : 'initial'"
        (click)="bookClicked(i)"
        (@zoomToLeft.done)="onAnimationDone($event)"
      >
        <div class="storybook-cover">
          <div class="storybook-skin py-3 pl-3 pr-8">
            <div class="storybook-skin-content">
              <div class="storybook-title font-bold text-base truncate">
                {{ storyBook.title }}
              </div>
              <div class="storybook-date lining-nums font-bold">
                Edited: {{ formatDate(storyBook.createdAt) }}
              </div>
            </div>
          </div>
        </div>
        <div class="storybook-page"></div>
      </div>
      <div class="flex flex-row mx-auto">
        <button
          class="px-4 bg-base-200 shadow"
          (click)="navigateToEditPage(storyBook.id)"
        >
          <ng-icon class="text-4xl" name="bootstrapPencilSquare"></ng-icon>
        </button>
        <button
          class="px-4 bg-base-200 shadow"
          (click)="openModal(storyBook.id)"
        >
          <ng-icon class="text-4xl" name="bootstrapTrash"></ng-icon>
        </button>
      </div>
    </div>
    } }
  </div>

  <div
    *ngIf="isModalOpen"
    class="fixed inset-0 z-50 flex items-center justify-center bg-base-300 bg-opacity-50"
  >
    <div class="bg-base-300 rounded-lg p-6 shadow-lg">
      <h2 class="text-xl font-bold mb-4">Confirm Deletion</h2>
      <p>Are you sure you want to delete this Story Book?</p>
      <div class="mt-4 flex justify-between">
        <button
          (click)="closeModal()"
          class="ml-2 px-4 py-2 bg-gray-300 text-black rounded hover:bg-gray-400"
        >
          Cancel
        </button>
        <button
          (click)="confirmDelete()"
          class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"
        >
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
